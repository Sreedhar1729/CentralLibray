sap.ui.define(["./BaseController","sap/ui/core/mvc/Controller","sap/ui/model/odata/v2/ODataModel"],function(e,t){"use strict";return e.extend("com.app.centrallibrary.controller.Details",{onInit:function(){const e=this.getOwnerComponent().getRouter();e.attachRoutePatternMatched(this.onUserDetailsLoad,this)},onUserDetailsLoad:function(e){const{ID:t}=e.getParameter("arguments");this.id=t;const o=e.getParameter("name");const i=this.getView().byId("ObjectPageLayout");i.bindElement(`/Users(${t})`)},onBorrowNewBookPress:async function(e){var t=this.byId("idBooksTable").getSelectedItem().getBindingContext().getObject();var o=e.getSource().getParent();console.log(o);var i=o.getBindingContext().getObject();if(this.byId("idBooksTable").getSelectedItems().length>1){sap.m.MessageToast.show("Please select only one book");return}var s=this.byId("idBooksTable").getSelectedItem().getBindingContext().getObject();const n=new sap.ui.model.json.JSONModel({users_ID:i.ID,books_ID:s.ID,reservedate:new Date});this.getView().setModel(n,"userModel");const a=this.getView().getModel("userModel").getProperty("/"),r=this.getView().getModel("ModelV2");try{await this.createData(r,a,"/ReservedBooks");sap.m.MessageBox.success("Book reserved")}catch(e){sap.m.MessageBox.error("Some technical issue occurred")}},createData:function(e,t,o){return new Promise((i,s)=>{e.create(o,t,{refreshAfterChange:true,success:function(e){i(e)},error:function(e){s(e)}})})},onNotificationPress:async function(){if(!this.oNotificationDialog){this.oNotificationDialog=await this.loadFragment("Notification")}this.oNotificationDialog.open()},onCloseNotification:function(){if(this.oNotificationDialog.isOpen()){this.oNotificationDialog.close()}}})});